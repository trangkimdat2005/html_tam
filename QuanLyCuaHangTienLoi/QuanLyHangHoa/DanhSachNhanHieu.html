<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description"
    content="Vali is a responsive and free admin theme built with Bootstrap 5, SASS and PUG.js. It's fully customizable and modular.">
  <title>Quản Lý Nhãn Hiệu - Vali Admin</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="../assets/lib/bootstrap/css/main.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" type="text/css" href="../assets/css/base.css" />
  <link rel="stylesheet" href="../assets/lib/fontawesome/css/all.min.css" />
  
  <style>
    /* CSS cho hiệu ứng trượt */
    #list-col,
    #form-col {
      transition: width 0.4s ease-in-out;
    }

    #form-col {
      overflow: hidden;
    }

    /* Trạng thái ban đầu (form ẩn) */
    #list-col.col-md-12 {
      width: 100%;
    }

    #form-col.col-md-0 {
      width: 0;
      opacity: 0;
      padding: 0;
      margin: 0;
      /* Đảm bảo form bị ẩn hoàn toàn */
    }

    /* Trạng thái khi form mở (thêm class .form-open vào #main-row-container) */
    .form-open #list-col {
      width: 66.66667%;
      /* Tương đương col-md-8 */
    }

    .form-open #form-col {
      width: 33.33333%;
      /* Tương đương col-md-4 */
      opacity: 1;
    }
  </style>

</head>

<body class="app sidebar-mini">
  <header class="app-header"><a class="app-header__logo" href=" /QuanLyCuaHangTienLoi/index.html">Vali</a>
    <a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
      aria-label="Hide Sidebar"></a>
    <ul class="app-nav">
      <li class="app-search">
        <input class="app-search__input" type="search" placeholder="Search">
        <button class="app-search__button"><i class="bi bi-search"></i></button>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown"
          aria-label="Show notifications"><i class="bi bi-bell fs-5"></i></a>
        <ul class="app-notification dropdown-menu dropdown-menu-right">
          <li class="app-notification__title">You have 4 new notifications.</li>
          <div class="app-notification__content">
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-envelope fs-4 text-primary"></i></span>
                <div>
                  <p class="app-notification__message">Lisa sent you a mail</p>
                  <p class="app-notification__meta">2 min ago</p>
                </div>
              </a></li>
          </div>
          <li class="app-notification__footer"><a href="#">See all notifications.</a></li>
        </ul>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i
            class="bi bi-person fs-4"></i></a>
        <ul class="dropdown-menu settings-menu dropdown-menu-right">
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-gear me-2 fs-5"></i> Settings</a></li>
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-person me-2 fs-5"></i> Profile</a></li>
          <li><a class="dropdown-item" href="page-login.html"><i class="bi bi-box-arrow-right me-2 fs-5"></i> Logout</a>
          </li>
        </ul>
      </li>
    </ul>
  </header>

  <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
  <aside class="app-sidebar">
    <div class="app-sidebar__user"><img class="app-sidebar__user-avatar"
        src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Image">
      <div>
        <p class="app-sidebar__user-name">John Doe</p>
        <p class="app-sidebar__user-designation">Frontend Developer</p>
      </div>
    </div>
    <ul class="app-menu">
      <li><a class="app-menu__item  " href=" /QuanLyCuaHangTienLoi/index.html"><i
            class="app-menu__icon bi bi-speedometer"></i><span class="app-menu__label">Bảng điều khiển</span></a></li>

      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="app-menu__icon bi bi-bar-chart-steps"></i><span class="app-menu__label">Quản lý hàng hoá</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item space-first-right-khoi" href="../QuanLyHangHoa/DanhSachSanPham.html"></i> Danh sách
              sản phẩm</a></li>
          <li><a class="treeview-item space-first-right-khoi" href="../QuanLyHangHoa/DanhSachDanhMuc.html"
              rel="noopener"></i> Quản lý danh mục</a></li>
          <li><a class="treeview-item space-first-right-khoi" href="../QuanLyHangHoa/DanhSachNhanHieu.html"> Danh sách
              nhãn hiệu</a></li>
          <li><a class="treeview-item space-first-right-khoi" href="../QuanLyHangHoa/DanhSachDonVi.html"> </i> Các đơn
              vị</a></li>
          <li><a class="treeview-item space-first-right-khoi" href="../QuanLyHangHoa/LichSuGiaBan.html"> </i> Lịch sử
              giá bán</a></li>
        </ul>
      </li>
      </ul>
  </aside>
  <main class="app-content">
    <div class="app-title">
      <div>
        <h1><i class="bi bi-tags"></i> Quản lý Nhãn hiệu</h1>
        <p>Quản lý các nhãn hiệu của sản phẩm</p>
      </div>
      <ul class="app-breadcrumb breadcrumb side">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item">Quản lý hàng hoá</li>
        <li class="breadcrumb-item active">
          <a href="#">Danh sách nhãn hiệu</a>
        </li>
      </ul>
    </div>

    <div class="row" id="main-row-container">
      
      <div class="col-md-12" id="list-col">
        <div class="tile">
          <div class="tile-title-w-btn d-flex justify-content-between align-items-center">
            <h3 class="title" style="margin-bottom: 0">
              Danh Sách Nhãn Hiệu
            </h3>
            <a class="btn btn-primary btn-add-khoi" href="#" id="show-add-form-btn">
              <i class="fas fa-plus"></i> Thêm nhãn hiệu mới
            </a>
          </div>

          <div class="tile-body">
            <div class="table-responsive">
              <table class="table table-hover table-bordered" id="sampleTable">
                <thead>
                  <tr>
                    <th>Mã Nhãn Hiệu (id)</th>
                    <th>Tên Nhãn Hiệu (ten)</th>
                    <th>Số Lượng Sản Phẩm</th>
                    <th class="text-center">Thao tác</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>CP</td>
                    <td>CP Foods</td>
                    <td>1</td>
                    <td class="text-center">
                      <a class="btn btn-info btn-sm me-1 btn-edit-khoi " href="#" title="Sửa">
                        <i class="fas fa-edit"></i>
                      </a>
                      <a class="btn btn-danger btn-sm btn-delete-khoi" href="#" title="Xóa">
                        <i class="fas fa-trash-alt"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td>TH</td>
                    <td>TH True Milk</td>
                    <td>1</td>
                    <td class="text-center">
                      <a class="btn btn-info btn-sm me-1 btn-edit-khoi " href="#" title="Sửa">
                        <i class="fas fa-edit"></i>
                      </a>
                      <a class="btn btn-danger btn-sm btn-delete-khoi" href="#" title="Xóa">
                        <i class="fas fa-trash-alt"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td>KHONGCO</td>
                    <td>(Không có)</td>
                    <td>1</td>
                    <td class="text-center">
                      <a class="btn btn-info btn-sm me-1 btn-edit-khoi " href="#" title="Sửa">
                        <i class="fas fa-edit"></i>
                      </a>
                      <a class="btn btn-danger btn-sm btn-delete-khoi" href="#" title="Xóa">
                        <i class="fas fa-trash-alt"></i>
                      </a>
                    </td>
                  </tr>
                  <tr>
                    <td>PEPSI</td>
                    <td>PepsiCo</td>
                    <td>5</td>
                    <td class="text-center">
                      <a class="btn btn-info btn-sm me-1 btn-edit-khoi " href="#" title="Sửa">
                        <i class="fas fa-edit"></i>
                      </a>
                      <a class="btn btn-danger btn-sm btn-delete-khoi" href="#" title="Xóa">
                        <i class="fas fa-trash-alt"></i>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-0" id="form-col">

        <div id="add-form-wrapper">
          <div class="tile">
            <h3 class="tile-title">Thêm Nhãn Hiệu Mới</h3>
            [cite_start]<p>Dữ liệu bám sát Bảng <strong>NhanHieu</strong>[cite: 3].</p>
            <div class="tile-body">
              <form id="add-brand-form">
                <div class="mb-3">
                  <label class="form-label">Mã Nhãn Hiệu (id)</label>
                  <input class="form-control" type="text" placeholder="Mã sẽ được tạo tự động" readonly>
                </div>
                <div class="mb-3">
                  <label class="form-label">Tên Nhãn Hiệu</label>
                  <input class="form-control" id="add-ten-input" type="text" placeholder="V.d: Vinamilk" required>
                </div>
              </form>
            </div>
            <div class="tile-footer">
              <button class="btn btn-primary" type="button"><i class="bi bi-check-circle-fill me-2"></i>Thêm</button>
              <a class="btn btn-secondary" href="#" id="cancel-add-form-btn"><i
                  class="bi bi-x-circle-fill me-2"></i>Huỷ</a>
            </div>
          </div>
        </div>
        
        <div id="edit-form-wrapper" style="display: none;">
          <div class="tile">
            <h3 class="tile-title">Sửa Nhãn Hiệu</h3>
            [cite_start]<p>Dữ liệu bám sát Bảng <strong>NhanHieu</strong>[cite: 3].</p>
            <div class="tile-body">
              <form id="edit-brand-form">
                <div class="mb-3">
                  <label class="form-label">Mã Nhãn Hiệu (id)</label>
                  <input class="form-control" id="edit-id-input" type="text" readonly>
                </div>
                <div class="mb-3">
                  <label class="form-label">Tên Nhãn Hiệu</label>
                  <input class="form-control" id="edit-ten-input" type="text" required>
                </div>
              </form>
            </div>
            <div class="tile-footer">
              <button class="btn btn-primary" type="button"><i class="bi bi-check-circle-fill me-2"></i>Lưu</button>
              <a class="btn btn-secondary" href="#" id="cancel-edit-form-btn"><i
                  class="bi bi-x-circle-fill me-2"></i>Huỷ</a>
            </div>
          </div>
        </div>

      </div> </div>
  </main>
  <script src="../assets/lib/jquery/jquery-3.7.0.min.js"></script>
  <script src="../assets/lib/bootstrap/js/bootstrap.min.js"></script>
  <script src="../assets/lib/bootstrap/js/main.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {

      // --- TRUY XUẤT PHẦN TỬ DOM ---
      const mainRow = document.getElementById('main-row-container');
      const listCol = document.getElementById('list-col');
      const formCol = document.getElementById('form-col');
      
      const showAddFormBtn = document.getElementById('show-add-form-btn');
      const tableBody = document.getElementById('sampleTable').getElementsByTagName('tbody')[0];

      // Form Wrappers
      const addFormWrapper = document.getElementById('add-form-wrapper');
      const editFormWrapper = document.getElementById('edit-form-wrapper');

      // Nút Huỷ
      const cancelAddBtn = document.getElementById('cancel-add-form-btn');
      const cancelEditBtn = document.getElementById('cancel-edit-form-btn');

      // Form Sửa Inputs
      const editIdInput = document.getElementById('edit-id-input');
      const editTenInput = document.getElementById('edit-ten-input');
      
      // Form Thêm Inputs
      const addTenInput = document.getElementById('add-ten-input');

      // --- HÀM MỞ FORM (CHUNG) ---
      function openForm(mode) {
        // 1. Co Bảng
        listCol.classList.remove('col-md-12');
        listCol.classList.add('col-md-8');
        
        // 2. Hiện Form
        formCol.classList.remove('col-md-0');
        formCol.classList.add('col-md-4');
        
        // 3. Thêm class điều khiển
        mainRow.classList.add('form-open');
        
        // 4. Ẩn nút "Thêm"
        showAddFormBtn.style.display = 'none';

        // 5. Chọn form nào để hiển thị
        if (mode === 'add') {
          addFormWrapper.style.display = 'block';
          editFormWrapper.style.display = 'none';
          // Xoá trắng các trường
          addTenInput.value = ''; 
        } else if (mode === 'edit') {
          addFormWrapper.style.display = 'none';
          editFormWrapper.style.display = 'block';
        }
      }

      // --- HÀM ĐÓNG FORM (CHUNG) ---
      function closeForm() {
        // 1. Phình Bảng
        listCol.classList.remove('col-md-8');
        listCol.classList.add('col-md-12');
        
        // 2. Ẩn Form
        formCol.classList.remove('col-md-4');
        formCol.classList.add('col-md-0');
        
        // 3. Xoá class điểu khiển
        mainRow.classList.remove('form-open');
        
        // 4. Hiện lại nút "Thêm"
        showAddFormBtn.style.display = 'block';
      }

      // --- GÁN SỰ KIỆN CHO NÚT "THÊM" ---
      showAddFormBtn.addEventListener('click', function(e) {
        e.preventDefault(); 
        openForm('add');
      });

      // --- GÁN SỰ KIỆN CHO CÁC NÚT "HUỶ" ---
      cancelAddBtn.addEventListener('click', function(e) {
        e.preventDefault();
        closeForm();
      });
      
      cancelEditBtn.addEventListener('click', function(e) {
        e.preventDefault();
        closeForm();
      });

      // --- GÁN SỰ KIỆN CHO BẢNG (SỬA & XOÁ) ---
      tableBody.addEventListener('click', function(e) {
        // Chỉ bắt sự kiện nếu nhấn vào <a> bên trong <td>
        const btn = e.target.closest('a'); 
        if (!btn) return; 

        e.preventDefault();
        const row = btn.closest('tr');
        
        // Yêu cầu 1: XỬ LÝ NÚT SỬA (btn-edit-khoi)
        if (btn.classList.contains('btn-edit-khoi')) {
          // 1. Lấy dữ liệu từ bảng
          const maNhanHieu = row.cells[0].textContent.trim();
          const tenNhanHieu = row.cells[1].textContent.trim();

          // 2. Điền vào form "Sửa"
          editIdInput.value = maNhanHieu;
          editTenInput.value = tenNhanHieu;

          // 3. Mở form ở chế độ "edit"
          openForm('edit');
        }

        // Yêu cầu 2: XỬ LÝ NÚT XOÁ (btn-delete-khoi)
        if (btn.classList.contains('btn-delete-khoi')) {
          const tenNhanHieu = row.cells[1].textContent.trim();
          
          // 3. Hỏi xác nhận
          if (confirm(`Bạn có chắc muốn xoá nhãn hiệu "${tenNhanHieu}" không?`)) {
            // 4. Thực hiện xoá (ở đây là xoá hàng trong table)
            row.remove();
            
            // Đóng form nếu nó đang mở
            closeForm();
          }
        }
      });

    });
  </script>

  <script type="text/javascript">
    if (document.location.hostname == 'pratikborsadiya.in') {
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-72504830-1', 'auto');
      ga('send', 'pageview');
    }
  </script>

</body>

</html>