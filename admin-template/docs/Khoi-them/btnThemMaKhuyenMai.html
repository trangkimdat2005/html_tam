<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description"
    content="Vali is a responsive and free admin theme built with Bootstrap 5, SASS and PUG.js. It's fully customizable and modular.">
  <title>Thêm Mã Khuyến Mãi - Vali Admin</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="../css/main.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="../js/plugins/select2/dist/css/select2.min.css">
  <!-- <link rel="stylesheet" type="text/css" href="../css/quanLySanPhamThem.css"> -->

  <style>
    .form-field-hidden {
      display: none;
    }
  </style>

</head>

<body class="app sidebar-mini">
  <header class="app-header"><a class="app-header__logo" href="index.html">Vali</a>
    <a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
      aria-label="Hide Sidebar"></a>
    <ul class="app-nav">
      <li class="app-search">
        <input class="app-search__input" type="search" placeholder="Search">
        <button class="app-search__button"><i class="bi bi-search"></i></button>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Show notifications"><i
            class="bi bi-bell fs-5"></i></a>
        <ul class="app-notification dropdown-menu dropdown-menu-right">
          <li class="app-notification__title">You have 4 new notifications.</li>
          <div class="app-notification__content">
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-envelope fs-4 text-primary"></i></span>
                <div>
                  <p class="app-notification__message">Lisa sent you a mail</p>
                  <p class="app-notification__meta">2 min ago</p>
                </div>
              </a></li>
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-exclamation-triangle fs-4 text-warning"></i></span>
                <div>
                  <p class="app-notification__message">Mail server not working</p>
                  <p class="app-notification__meta">5 min ago</p>
                </div>
              </a></li>
          </div>
          <li class="app-notification__footer"><a href="#">See all notifications.</a></li>
        </ul>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i
            class="bi bi-person fs-4"></i></a>
        <ul class="dropdown-menu settings-menu dropdown-menu-right">
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-gear me-2 fs-5"></i> Settings</a></li>
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-person me-2 fs-5"></i> Profile</a></li>
          <li><a class="dropdown-item" href="page-login.html"><i class="bi bi-box-arrow-right me-2 fs-5"></i>
              Logout</a></li>
        </ul>
      </li>
    </ul>
  </header>

  <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
  <aside class="app-sidebar">
    <div class="app-sidebar__user"><img class="app-sidebar__user-avatar"
        src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Image">
      <div>
        <p class="app-sidebar__user-name">John Doe</p>
        <p class="app-sidebar__user-designation">Frontend Developer</p>
      </div>
    </div>
    <ul class="app-menu">
        <li><a class="app-menu__item  " href="dashboard.html"><i class="app-menu__icon bi bi-speedometer"></i><span
              class="app-menu__label">Bảng điều khiển</span></a></li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
              class="app-menu__icon bi bi-bar-chart-steps"></i><span class="app-menu__label">Quản lý hàng
              hoá</span><i class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class="treeview-item space-first-right-khoi" href="bootstrap-components.html"></i> Danh sách sản
                phẩm</a></li>
            <li><a class="treeview-item space-first-right-khoi" href="https://icons.getbootstrap.com/" target="_blank"
                rel="noopener"></i> Quản lý danh mục</a></li>
            <li><a class="treeview-item space-first-right-khoi" href="ui-cards.html"> Danh sách nhãn hiệu</a></li>
            <li><a class="treeview-item space-first-right-khoi" href="widgets.html"> </i> Các đơn vị</a></li>
            <li><a class="treeview-item space-first-right-khoi" href="widgets.html"> </i> Lịch sử giá bán</a></li>
          </ul>
        </li>
        <li><a class="app-menu__item" href="dashboard.html"><i class="app-menu__icon bi bi-receipt-cutoff"></i><span
              class="app-menu__label">Danh sách hoá đơn</span></a></li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
              class="app-menu__icon bi-person-circle"></i><span class="app-menu__label">Quản lý nhân sự</span><i
              class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Danh sách nhân
                viên</a></li>
            <li><a class=" treeview-item space-first-right-khoi" href="https://icons.getbootstrap.com/" target="_blank"
                rel="noopener"> </i> Lịch làm việc</a></li>
            <li><a class=" treeview-item space-first-right-khoi" href="ui-cards.html"> </i> Phân công ca làm việc</a>
            </li>
          </ul>
        </li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
              class="app-menu__icon bi bi-people"></i><span class="app-menu__label">Quản lý khách hàng</span><i
              class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Danh sách khách
                hàng</a></li>
            <li><a class=" treeview-item space-first-right-khoi" href="https://icons.getbootstrap.com/" target="_blank"
                rel="noopener"> </i> Thẻ thành viên</a></li>
            <li><a class=" treeview-item space-first-right-khoi" href="ui-cards.html"> </i> Lịch sử mua hàng</a></li>
          </ul>
        </li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
              class="app-menu__icon bi bi-percent"></i><span class="app-menu__label">Quản lý khuyến mãi</span><i
              class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Chương trình
                khuyến mãi</a></li>
            <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Mã khuyến mãi</a>
            </li>
            <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Điều kiện áp
                dụng</a></li>
          </ul>
        </li>
        </ul>
  </aside>

  <main class="app-content">
    <div class="app-title">
      <div>
        <h1><i class="bi bi-percent"></i> Thêm Chương Trình Khuyến Mãi</h1>
        <p>Tạo chương trình và mã giảm giá mới</p>
      </div>
      <ul class="app-breadcrumb breadcrumb">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item"><a href="#">Quản lý khuyến mãi</a></li>
        <li class="breadcrumb-item"><a href="#">Thêm mới</a></li>
      </ul>
    </div>
    <div class="row">

      <div class="col-md-8">
        <div class="tile">
          <h3 class="tile-title">Thông tin Chương trình & Điều kiện</h3>
          <div class="tile-body">
            <form id="form-khuyen-mai">
              <div class="mb-3">
                <label class="form-label">Tên chương trình </label>
                <input class="form-control" type="text" placeholder="V.d: Khai trương giảm sốc, Sale hè 2025...">
              </div>

              <div class="mb-3">
                <label class="form-label">Mô tả </label>
                <textarea class="form-control" rows="3" placeholder="Mô tả chi tiết chương trình"></textarea>
              </div>

              <div class="mb-3">
                <label class="form-label">Mã Khuyến Mãi (Code) </label>
                <div class="input-group">
                  <input class="form-control" type="text" placeholder="V.d: SALE20, FREE_SHIP" id="ma-code-input">
                  <button class="btn btn-primary" type="button" id="generate-code-btn">Tạo mã ngẫu nhiên</button>
                </div>
              </div>

              <hr>
              <h5 class="mb-3">Giá trị & Điều kiện</h5>

              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Hình thức giảm </label>
                    <select class="form-select" id="select-hinh-thuc-giam">
                      <option value="PhanTram">Phần trăm (%)</option>
                      <option value="SoTien">Số tiền (VND)</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label" id="label-gia-tri">Giá trị giảm (%) </label>
                    <input class="form-control" type="number" placeholder="V.d: 20">
                  </div>
                </div>
              </div>

              <div class="mb-3" id="field-giam-toi-da">
                <label class="form-label">Giảm tối đa (VND) </label>
                <input class="form-control" type="number" placeholder="V.d: 50000">
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Đơn hàng tối thiểu (VND) </label>
                    <input class="form-control" type="number" placeholder="V.d: 100000" value="0">
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Tổng số lần sử dụng </label>
                    <input class="form-control" type="number" placeholder="V.d: 100">
                  </div>
                </div>
              </div>

            </form>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="tile">
          <h3 class="tile-title">Cài đặt</h3>
          <div class="tile-body">
            <div class="mb-3">
              <label class="form-label">Trạng thái </label>
              <select class="form-select">
                <option value="HoatDong">Hoạt động</option>
                <option value="TamDung">Tạm dừng</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Ngày bắt đầu </label>
              <input class="form-control" type="date">
            </div>
            <div class="mb-3">
              <label class="form-label">Ngày kết thúc </label>
              <input class="form-control" type="date">
            </div>
          </div>
          <div class="tile-footer">
            <button class="btn btn-primary" type="button"><i class="bi bi-check-circle-fill me-2"></i>Lưu</button>
            <a class="btn btn-secondary" href="#"><i class="bi bi-x-circle-fill me-2"></i>Huỷ</a>
          </div>
        </div>

        <div class="tile">
          <h3 class="tile-title">Phạm vi áp dụng</h3>
          <div class="tile-body">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="phamViApDung" id="radio-toan-bo" value="toan-bo" checked>
              <label class="form-check-label" for="radio-toan-bo">
                Toàn bộ cửa hàng
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="phamViApDung" id="radio-danh-muc" value="danh-muc">
              <label class="form-check-label" for="radio-danh-muc">
                Danh mục cụ thể
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="phamViApDung" id="radio-san-pham" value="san-pham">
              <label class="form-check-label" for="radio-san-pham">
                Sản phẩm cụ thể
              </label>
            </div>

            <div class="mb-3 mt-3 form-field-hidden" id="field-chon-danh-muc">
              <label class="form-label">Chọn danh mục </label>
              <select class="form-control" id="select-danh-muc" multiple="multiple">
                <option value="dm_01">Đồ uống</option>
                <option value="dm_02">Đồ ăn nhanh</option>
                <option value="dm_03">Hàng gia dụng</option>
              </select>
            </div>
            
            <div class="mb-3 mt-3 form-field-hidden" id="field-chon-san-pham">
              <label class="form-label">Chọn sản phẩm </label>
              <select class="form-control" id="select-san-pham" multiple="multiple">
                <option value="sp_01">Sting Dâu</option>
                <option value="sp_02">Bánh mì Sandwich</option>
                <option value="sp_03">Coca Cola</option>
                <option value="sp_04">Dao cạo râu</option>
              </select>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>
  <script src="../js/jquery-3.7.0.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/plugins/select2/dist/js/select2.min.js"></script>
  <script src="../js/main.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {

      // --- KHỞI TẠO SELECT2 CHO CÁC Ô CHỌN ---
      $('#select-danh-muc').select2({
        width: '100%',
        placeholder: 'Chọn một hoặc nhiều danh mục'
      });
      $('#select-san-pham').select2({
        width: '100%',
        placeholder: 'Chọn một hoặc nhiều sản phẩm'
      });

      // --- TRUY XUẤT PHẦN TỬ DOM ---
      const selectHinhThucGiam = document.getElementById('select-hinh-thuc-giam');
      const labelGiaTri = document.getElementById('label-gia-tri');
      const fieldGiamToiDa = document.getElementById('field-giam-toi-da');
      
      const radioPhamVi = document.querySelectorAll('input[name="phamViApDung"]');
      const fieldChonDanhMuc = document.getElementById('field-chon-danh-muc');
      const fieldChonSanPham = document.getElementById('field-chon-san-pham');

      // --- LOGIC 1: THAY ĐỔI HÌNH THỨC GIẢM (%) HOẶC (VND) ---
      selectHinhThucGiam.addEventListener('change', function () {
        if (this.value === 'PhanTram') {
          // Nếu là %, hiển thị ô "Giảm tối đa" và đổi nhãn
          labelGiaTri.textContent = 'Giá trị giảm (%) ';
          fieldGiamToiDa.classList.remove('form-field-hidden');
        } else {
          // Nếu là VND, ẩn ô "Giảm tối đa" và đổi nhãn
          labelGiaTri.textContent = 'Giá trị giảm (VND) ';
          fieldGiamToiDa.classList.add('form-field-hidden');
        }
      });
      // Kích hoạt sự kiện change một lần lúc tải trang để đảm bảo trạng thái đúng
      selectHinhThucGiam.dispatchEvent(new Event('change'));

      
      // --- LOGIC 2: THAY ĐỔI PHẠM VI ÁP DỤNG ---
      radioPhamVi.forEach(radio => {
        radio.addEventListener('change', function () {
          // Ẩn tất cả các trường chọn trước
          fieldChonDanhMuc.classList.add('form-field-hidden');
          fieldChonSanPham.classList.add('form-field-hidden');
          
          if (this.value === 'danh-muc') {
            fieldChonDanhMuc.classList.remove('form-field-hidden');
          } else if (this.value === 'san-pham') {
            fieldChonSanPham.classList.remove('form-field-hidden');
          }
          // Nếu là 'toan-bo' thì không làm gì cả (vì đã ẩn hết)
        });
      });

      // --- LOGIC 3: TẠO MÃ NGẪU NHIÊN ---
      document.getElementById('generate-code-btn').addEventListener('click', function() {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        let result = '';
        for (let i = 0; i < 8; i++) {
          result += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        document.getElementById('ma-code-input').value = result;
      });

    });
  </script>
</body>

</html>