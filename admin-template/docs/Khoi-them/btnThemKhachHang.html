<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description"
    content="Vali is a responsive and free admin theme built with Bootstrap 5, SASS and PUG.js. It's fully customizable and modular.">
  <title>Thêm Khách Hàng - Vali Admin</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="../css/main.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="../js/plugins/select2/dist/css/select2.min.css">
<link rel="stylesheet" href="../css/btnThemKhachHang.css">

</head>

<body class="app sidebar-mini">
  <header class="app-header"><a class="app-header__logo" href="index.html">Vali</a>
    <a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
      aria-label="Hide Sidebar"></a>
    <ul class="app-nav">
      <li class="app-search">
        <input class="app-search__input" type="search" placeholder="Search">
        <button class="app-search__button"><i class="bi bi-search"></i></button>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Show notifications"><i
            class="bi bi-bell fs-5"></i></a>
        <ul class="app-notification dropdown-menu dropdown-menu-right">
          <li class="app-notification__title">You have 4 new notifications.</li>
          <div class="app-notification__content">
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-envelope fs-4 text-primary"></i></span>
                <div>
                  <p class="app-notification__message">Lisa sent you a mail</p>
                  <p class="app-notification__meta">2 min ago</p>
                </div>
              </a></li>
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-exclamation-triangle fs-4 text-warning"></i></span>
                <div>
                  <p class="app-notification__message">Mail server not working</p>
                  <p class="app-notification__meta">5 min ago</p>
                </div>
              </a></li>
          </div>
          <li class="app-notification__footer"><a href="#">See all notifications.</a></li>
        </ul>
      </li>
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i
            class="bi bi-person fs-4"></i></a>
        <ul class="dropdown-menu settings-menu dropdown-menu-right">
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-gear me-2 fs-5"></i> Settings</a></li>
          <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-person me-2 fs-5"></i> Profile</a></li>
          <li><a class="dropdown-item" href="page-login.html"><i class="bi bi-box-arrow-right me-2 fs-5"></i>
              Logout</a></li>
        </ul>
      </li>
    </ul>
  </header>

  <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
  <aside class="app-sidebar">
    <div class="app-sidebar__user"><img class="app-sidebar__user-avatar"
        src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Image">
      <div>
        <p class="app-sidebar__user-name">John Doe</p>
        <p class="app-sidebar__user-designation">Frontend Developer</p>
      </div>
    </div>
    <ul class="app-menu">
      <li><a class="app-menu__item  " href="dashboard.html"><i class="app-menu__icon bi bi-speedometer"></i><span
            class="app-menu__label">Bảng điều khiển</span></a></li>
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="app-menu__icon bi bi-people"></i><span class="app-menu__label">Quản lý khách hàng</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class=" treeview-item space-first-right-khoi" href="bootstrap-components.html"> </i> Danh sách khách
              hàng</a></li>
          <li><a class=" treeview-item space-first-right-khoi" href="." target="_blank" rel="noopener"> </i> Thẻ thành
              viên</a></li>
          <li><a class=" treeview-item space-first-right-khoi" href="ui-cards.html"> </i> Lịch sử mua hàng</a></li>
        </ul>
      </li>
      </ul>
  </aside>

  <main class="app-content">
    <div class="app-title">
      <div>
        <h1><i class="bi bi-person-plus-fill"></i> Thêm Khách Hàng Mới</h1>
        <p>Thêm thông tin khách hàng và tạo thẻ thành viên</p>
      </div>
      <ul class="app-breadcrumb breadcrumb">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item"><a href="#">Quản lý khách hàng</a></li>
        <li class="breadcrumb-item"><a href="#">Thêm mới</a></li>
      </ul>
    </div>

    <div class="row" id="main-form-row">

      <div class="col-md-6" id="membership-form-container">
        <div class="tile">
          <h3 class="tile-title">Thông tin Thẻ Thành Viên</h3>
          <p>Dữ liệu sẽ được lưu vào bảng <strong>TheThanhVien</strong>.</p>
          <div class="tile-body">

            <div class="mb-3">
              <label class="form-label">Hạng thẻ</label>
              <select class="form-select" id="select-hang-the">
                <option value="Silver">Silver (Mặc định)</option>
                <option value="Gold">Gold</option>
                <option value="Platinum">Platinum</option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">Điểm tích luỹ ban đầu</label>
              <input class="form-control" type="number" value="0">
            </div>

            <div class="mb-3">
              <label class="form-label">Ngày cấp thẻ</label>
              <input class="form-control" type="date" id="input-ngay-cap">
            </div>

          </div>
        </div>
      </div>

      <div class="col-md-6 mx-auto" id="customer-form-container">
        <div class="tile">
          <h3 class="tile-title">Thông tin Khách Hàng</h3>
          <p>Dữ liệu sẽ được lưu vào bảng <strong>KhachHang</strong>.</p>
          <div class="tile-body">
            
            <div class="avatar-upload-container">
                <img class="avatar-preview" id="avatarPreview" src="https://via.placeholder.com/128?text=Avatar"
                  alt="Avatar">
                <input class="avatar-edit-input" type="file" id="avatarUpload" accept=".png, .jpg, .jpeg">
                <label class="avatar-edit-label" for="avatarUpload"><i class="bi bi-camera-fill"></i></label>
            </div>

            <div class="mb-3">
              <label class="form-label">Họ và tên</label>
              <input class="form-control" type="text" placeholder="V.d: Nguyễn Văn B">
            </div>

            <div class="mb-3">
                <label class="form-label">Giới tính</label>
                <div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gioiTinh" id="radioNam" value="Nam" checked>
                    <label class="form-check-label" for="radioNam">Nam</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="gioiTinh" id="radioNu" value="Nu">
                    <label class="form-check-label" for="radioNu">Nữ</label>
                  </div>
                </div>
            </div>

            <div class="mb-3">
              <label class="form-label">Số điện thoại</label>
              <input class="form-control" type="tel" placeholder="V.d: 091xxxx789">
            </div>

            <div class="mb-3">
              <label class="form-label">Email</label>
              <input class="form-control" type="email" placeholder="V.d: v.b@email.com">
            </div>

            <div class="mb-3">
              <label class="form-label">Địa chỉ</label>
              <input class="form-control" type="text" placeholder="V.d: 456 Lê Lợi, Q.3">
            </div>

            <div class="mb-3">
              <label class="form-label">Ngày đăng ký</label>
              <input class="form-control" type="date" id="input-ngay-dang-ky">
            </div>

            <div class="mb-3">
              <label class="form-label">Trạng thái</label>
              <select class="form-select" id="select-trang-thai">
                <option value="Active">Active (Mặc định)</option>
                <option value="Inactive">Inactive</option>
              </select>
            </div>

            <hr>

            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="toggle-membership-form">
                <label class="form-check-label" for="toggle-membership-form">
                  Mở Thẻ Thành Viên
                </label>
              </div>
            </div>

          </div>
          <div class="tile-footer">
            <button class="btn btn-primary" type="button"><i class="bi bi-check-circle-fill me-2"></i>Lưu thông
              tin</button>
            <a class="btn btn-secondary" href="#"><i class="bi bi-x-circle-fill me-2"></i>Huỷ</a>
          </div>
        </div>
      </div>

    </div>
  </main>
  <script src="../js/jquery-3.7.0.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>
  <script src="../js/plugins/select2/dist/js/select2.min.js"></script>
  <script src="../js/main.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {

      // --- KHỞI TẠO SELECT2 ---
      $('#select-hang-the').select2({ width: '100%' });
      $('#select-trang-thai').select2({ width: '100%' });

      // --- TỰ ĐỘNG ĐIỀN NGÀY HÔM NAY ---
      const today = new Date().toISOString().split('T')[0];
      const ngayDangKyInput = document.getElementById('input-ngay-dang-ky');
      const ngayCapTheInput = document.getElementById('input-ngay-cap');
      
      if (ngayDangKyInput) ngayDangKyInput.value = today;
      if (ngayCapTheInput) ngayCapTheInput.value = today;

      // --- TRUY XUẤT CÁC PHẦN TỬ FORM ---
      const toggleSwitch = document.getElementById('toggle-membership-form'); // ID giữ nguyên
      const customerContainer = document.getElementById('customer-form-container');
      const membershipContainer = document.getElementById('membership-form-container');

      // --- XỬ LÝ LOGIC CHÍNH KHI BẬT/TẮT CHECKBOX ---
      toggleSwitch.addEventListener('change', function () {
        if (this.checked) {
          // --- KÍCH HOẠT CHẾ ĐỘ 2 CỘT ---
          membershipContainer.style.display = 'block';
          setTimeout(() => {
            membershipContainer.style.opacity = 1;
          }, 10);
          customerContainer.classList.remove('mx-auto');
        } else {
          // --- TẮT, QUAY VỀ TRẠNG THÁI BAN ĐẦU ---
          membershipContainer.style.opacity = 0;
          setTimeout(() => {
            membershipContainer.style.display = 'none';
          }, 500); 
          customerContainer.classList.add('mx-auto');
        }
      });
      
      // --- THÊM MỚI: XỬ LÝ PREVIEW ẢNH ĐẠI DIỆN ---
      const avatarUpload = document.getElementById('avatarUpload');
      const avatarPreview = document.getElementById('avatarPreview');

      avatarUpload.addEventListener('change', function() {
        const file = this.files[0]; // Lấy file đầu tiên
        if (file) {
          // Tạo một URL tạm thời cho file ảnh
          const reader = new FileReader();
          reader.onload = function(e) {
            // Gán URL này cho ảnh preview
            avatarPreview.src = e.target.result;
          }
          reader.readAsDataURL(file);
        }
      });

    });
  </script>

  <script type="text/javascript">
    if (document.location.hostname == 'pratikborsadiya.in') {
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
          m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-72504830-1', 'auto');
      ga('send', 'pageview');
    }
  </script>
</body>

</html>